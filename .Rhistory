setwd("~/Repro-markdown/gdr")
library(WikidataQueryServiceR)
library(ggplot2)
tablo <- query_wikidata('SELECT DISTINCT ?_udem ?_udemLabel ?field_of_work ?field_of_workLabel ?orcid ?gs_id ?researchgate_id ?academia_id ?genderLabel WHERE {
SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
{?_udem wdt:P108 wd:Q392189}              # employer = UdeM
UNION                                  # OR
{ ?_udem wdt:P1416 wd:Q392189}            # affiliation = UdeM
{?_udem wdt:P101 wd:Q50637}               # field of work = art history
UNION
{ ?_udem wdt:P101 wd:Q6689}  # ou French literature
UNION
{ ?_udem wdt:P101 wd:Q23404}  # ou anthropology
UNION
{ ?_udem wdt:P101 wd:Q8162} # ou linguistics
UNION
{ ?_udem wdt:P101 wd:Q309}   # history
UNION
{ ?_udem wdt:P101 wd:Q36442} # political science
UNION
{ ?_udem wdt:P101 wd:Q199655} # library science
UNION
{ ?_udem wdt:P101 wd:Q37732} # demography
UNION
{ ?_udem wdt:P101 wd:Q161733} # criminology
UNION
{ ?_udem wdt:P101 wd:Q932071} # industrial relations
UNION
{ ?_udem wdt:P101 wd:Q205398} # social work
UNION
{ ?_udem wdt:P101 wd:Q34187} # religious studies
UNION
{ ?_udem wdt:P101 wd:Q21201}  #  sociology
UNION
{ ?_udem wdt:P101 wd:Q8134} # economics
UNION
{ ?_udem wdt:P101 wd:Q5891} # philosophy
UNION
{ ?_udem wdt:P101 wd:Q208217}   # literary studies
OPTIONAL { ?_udem wdt:P101 ?field_of_work.     } # discipline
OPTIONAL { ?_udem wdt:P496 ?orcid.             } # ORCID
OPTIONAL { ?_udem wdt:P1960 ?gs_id.            } # Google Scholar ID
OPTIONAL { ?_udem wdt:P2038 ?researchgate_id.  } # ResearchGate ID
OPTIONAL { ?_udem wdt:P5715 ?academia_id.      } # Academia.edu URL
OPTIONAL { ?_udem wdt:P21 ?gender.      } # male or female
FILTER ( ?field_of_work in ( wd:Q23404,wd:Q50637,wd:Q6689,wd:Q8162,wd:Q309,wd:Q36442,wd:Q199655,wd:Q37732,wd:Q161733,wd:Q932071,wd:Q205398,wd:Q34187,wd:Q21201,wd:Q8134,wd:Q5891,wd:Q208217 ) )   # pour limiter aux disciplines/départements normalisés
}')
View(tablo)
tablo$field_of_workLabel2 <- factor(tablo$field_of_workLabel,  ordered = TRUE)
View(tablo)
freq(tablo$field_of_workLabel)
library(questionr)
freq(tablo$field_of_workLabel)
freq(tablo$field_of_workLabel2)
tablo2 <- tablo[order(field_of_workLabel) , ]
tablo2 <- tablo[order(tablo$field_of_workLabel) , ]
View(tablo2)
freq(tablo$field_of_workLabel, sort = "inc",  exclude = NA)
tb.eff2 <-freq(tablo$field_of_workLabel, sort = "inc",  exclude = NA)# tableau d'effectifs
barplot(tb.eff2,
beside = TRUE,
horiz=TRUE,
las=2,
xlim=c(0, 50),
xlab="Nombre d'identifiants Wikidata",
legend = levels(tablo$field_of_workLabel),
main="Distribution par discipline des identifiants Wikidata des chercheurs"
)
tb.eff2 <-freq(tablo$field_of_workLabel, sort = "inc",  exclude = NA)# tableau d'effectifs
barplot(tb.eff2,
xlim=c(0, 50),
xlab="Nombre d'identifiants Wikidata",
legend = levels(tablo$field_of_workLabel),
main="Distribution par discipline des identifiants Wikidata des chercheurs"
)
tb.eff <- table(tablo$field_of_workLabel,!is.na(tablo$orcid)) # TRUE = sans ORCID : à inverser
barplot(tb.eff,
beside = TRUE,
horiz=TRUE,
las=2,
xlim=c(0, 50),
xlab="Nb d'ORCID",
legend = levels(tablo$field_of_workLabel), # Afficher les noms des disciplines par ordre
main="Distribution par discipline des identifiants ORCID des chercheurs"
)
tb.eff <- table(tablo$field_of_workLabel) # tableau d'effectifs
barplot(tb.eff,
beside = TRUE,
horiz=TRUE,
las=2,
xlim=c(0, 50),
xlab="Nombre d'identifiants Wikidata",
legend = levels(tablo$field_of_workLabel),
main="Distribution par discipline des identifiants Wikidata des chercheurs"
)
str(tb.eff)
str(tb.eff2)
ggplot(tablo,aes(x= reorder(field_of_workLabel,-num),field_of_workLabel))+geom_bar(stat ="identity")
ggplot(tablo,aes(x= reorder(field_of_workLabel),field_of_workLabel))+geom_bar(stat ="identity")
ggplot(tablo,aes(x= reorder(field_of_workLabel,-field_of_workLabel),field_of_workLabel))+geom_bar(stat ="identity")
ggplot(tablo,aes(x= reorder(field_of_workLabel,-field_of_workLabel)+geom_bar(stat ="identity")
ggplot(tablo,aes(x= reorder(field_of_workLabel,-field_of_workLabel)+geom_bar(stat ="identity"))
ggplot(tablo,aes(x= reorder(field_of_workLabel,-field_of_workLabel)+geom_bar(stat ="identity"))
ggplot(tablo,aes(x= reorder(field_of_workLabel,-field_of_workLabel)+geom_bar(stat ="identity")))
ggplot(tablo,aes(x= reorder(field_of_workLabel,-field_of_workLabel)+geom_bar(stat ="identity"))
barplot(sort(tablo$field_of_workLabel, decreasing = TRUE))
View(tablo)
barplot(tablo$field_of_workLabel, decreasing = TRUE)
tb.eff <- table(tablo$field_of_workLabel)
barplot(sort(tb.eff , decreasing = TRUE))
ggplot(tablo2, aes(x = reorder(field_of_workLabel2)) + geom_bar(stat = "identity")
, -perc
, y = perc)
ggplot(tablo, aes( x = reorder(field_of_workLabel,field_of_workLabel,function(x)-length(x)))) + geom_bar()
barplot(sort(tb.eff , decreasing = TRUE))
ggplot(tablo, aes( x = reorder(field_of_workLabel,field_of_workLabel,function(x)-length(x)))) + geom_bar()
tb.eff <- table(tablo$field_of_workLabel)
barplot(sort(tb.eff , decreasing = TRUE))
